:root {
  color-scheme: light dark;
  font-family: 'Inter', system-ui, sans-serif;
  background: #0b1220;
  color: #e8edf6;
  --footer-stack-height: 88px;
  --bottom-nav-h: 124px;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  background: #0b1220;
  font-size: 16px;
  line-height: 1.55;
  text-rendering: optimizeLegibility;
}

.hidden {
  display: none !important;
}

.error-overlay {
  position: fixed;
  inset: 0;
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px 16px calc(24px + env(safe-area-inset-bottom));
  background: rgba(6, 11, 22, 0.85);
  backdrop-filter: blur(8px);
}

.error-overlay__card {
  width: min(560px, 100%);
  max-height: min(80vh, 640px);
  overflow: auto;
  padding: 20px;
  border-radius: 16px;
  background: #101a2e;
  border: 1px solid #233255;
  display: flex;
  flex-direction: column;
  gap: 12px;
  box-shadow: 0 18px 45px rgba(3, 8, 18, 0.45);
}

.error-overlay__card h2 {
  margin: 0;
  font-size: 20px;
}

.error-overlay__message {
  margin: 0;
  font-size: 14px;
  color: #e8edf6;
  word-break: break-word;
}

.error-overlay__stack {
  margin: 0;
  padding: 12px;
  border-radius: 12px;
  background: #0f1627;
  border: 1px solid #24314d;
  font-size: 12px;
  line-height: 1.4;
  color: #b8c5dd;
  white-space: pre-wrap;
}

.error-overlay__actions {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
}

.error-overlay__buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.error-overlay__status {
  font-size: 12px;
  color: #b8c5dd;
}

.error-overlay__debug {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: #b8c5dd;
}

.error-overlay__debug input {
  accent-color: #7ef7e6;
}

.diagnostics-panel {
  position: fixed;
  right: 16px;
  bottom: calc(16px + var(--footer-stack-height) + env(safe-area-inset-bottom, 0px));
  z-index: 998;
  width: min(360px, calc(100vw - 32px));
  background: rgba(10, 16, 30, 0.92);
  border: 1px solid #273454;
  border-radius: 14px;
  padding: 10px 12px;
  color: #d6e0f2;
  font-size: 12px;
  box-shadow: 0 12px 30px rgba(4, 10, 20, 0.4);
}

.diagnostics-panel summary {
  cursor: pointer;
  font-weight: 600;
  list-style: none;
}

.diagnostics-panel summary::-webkit-details-marker {
  display: none;
}

.diagnostics-panel__actions {
  margin: 10px 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.diagnostics-panel__buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.diagnostics-panel__status {
  font-size: 11px;
  color: #9aa8c2;
}

.diagnostics-panel__list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 240px;
  overflow: auto;
}

.diagnostics-panel__item {
  padding: 8px;
  border-radius: 10px;
  background: #101a2e;
  border: 1px solid #253150;
}

.diagnostics-panel__header {
  font-weight: 600;
  margin-bottom: 6px;
}

.diagnostics-panel__details {
  margin: 0;
  white-space: pre-wrap;
  color: #b8c5dd;
}

.diagnostics-panel__empty {
  color: #9aa8c2;
}

@media (max-width: 520px) {
  .error-overlay {
    align-items: flex-end;
  }

  .error-overlay__card {
    width: 100%;
    max-height: 85vh;
    border-radius: 16px 16px 0 0;
  }

  .diagnostics-panel {
    right: 8px;
    left: 8px;
    width: auto;
  }
}


.offline-banner {
  position: sticky;
  top: 0;
  z-index: 9;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  background: #5e451a;
  color: #fef5d8;
  border-bottom: 1px solid #7a5d2a;
  font-size: 14px;
}

.offline-banner.hidden {
  display: none;
}

.update-banner {
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: center;
  padding: 12px 16px;
  background: #17305c;
  color: #e8edf6;
  border-bottom: 1px solid #2a4270;
}

.update-banner.hidden {
  display: none;
}

.sw-banner {
  position: sticky;
  top: 0;
  z-index: 11;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px 16px;
  background: #4a2630;
  color: #f3dfe4;
  border-bottom: 1px solid #5f3540;
}

.sw-banner__content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 14px;
}

.sw-banner__stack {
  margin: 0;
  padding: 10px 12px;
  border-radius: 12px;
  background: #351c23;
  border: 1px solid #5f3540;
  font-size: 12px;
  line-height: 1.4;
  color: #f3dfe4;
  white-space: pre-wrap;
}

.muted-error-banner {
  position: sticky;
  top: 0;
  z-index: 12;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px 16px;
  background: #3a2d19;
  color: #f6ead3;
  border-bottom: 1px solid #5a4527;
}

.muted-error-banner__content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 14px;
}

.muted-error-banner__actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.muted-error-banner__status {
  font-size: 12px;
  color: #e7d2a2;
}

.button.small {
  padding: 6px 14px;
  font-size: 12px;
}

#app {
  max-width: 430px;
  margin: 0 auto;
  min-height: 100vh;
  height: 100dvh;
}

.app-shell {
  min-height: 100vh;
  height: 100dvh;
  display: flex;
  flex-direction: column;
}

.app-main {
  flex: 1;
  overflow-y: auto;
  padding: 24px 16px calc(16px + var(--bottom-nav-h, 70px) + env(safe-area-inset-bottom, 0px));
}

.app-footer {
  padding: 12px 16px calc(12px + env(safe-area-inset-bottom, 0px));
  display: grid;
  gap: 8px;
  background: linear-gradient(180deg, rgba(11, 18, 32, 0.85) 0%, #0b1220 35%);
}

.screen {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.screen-header {
  display: flex;
  gap: 12px;
  align-items: center;
}

.screen-header h1 {
  margin: 0 0 4px;
  font-size: 24px;
  line-height: 1.2;
  color: #f5f8ff;
}

.screen-header p {
  margin: 0;
  font-size: 15px;
  color: #c8d4ea;
}

.shield-group {
  display: grid;
  gap: 10px;
}

.group-title {
  margin: 0;
  font-size: 20px;
  color: #f5f8ff;
}

.avatar {
  min-width: 120px;
  padding: 8px 10px;
  border-radius: 16px;
  background: linear-gradient(135deg, #4f8bff, #7ef7e6);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  color: #0b1220;
  font-weight: 700;
  text-align: center;
  border: 1px solid transparent;
}

.avatar--tense {
  background: linear-gradient(135deg, #ffb347, #ffd66d);
}

.avatar--storm {
  background: linear-gradient(135deg, #ff6b6b, #ff9d6c);
}

.avatar--rank-s {
  border-color: rgba(126, 247, 230, 0.6);
  box-shadow: 0 8px 18px rgba(126, 247, 230, 0.2);
}

.avatar--rank-a {
  border-color: rgba(79, 139, 255, 0.6);
  box-shadow: 0 8px 18px rgba(79, 139, 255, 0.2);
}

.avatar--rank-b {
  border-color: rgba(255, 211, 106, 0.5);
}

.avatar--rank-c {
  border-color: rgba(255, 164, 101, 0.6);
}

.avatar--rank-d {
  border-color: rgba(255, 107, 107, 0.6);
}

.avatar-face {
  font-size: 22px;
  line-height: 1;
}

.avatar-mark {
  font-size: 17px;
  line-height: 1;
}

.avatar-level {
  font-size: 12px;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

.avatar-text {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.avatar-phrase {
  font-size: 12px;
  font-weight: 600;
  opacity: 0.9;
}

.shield-summary {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.shield-summary div {
  background: #111a2b;
  border-radius: 12px;
  padding: 10px;
  display: grid;
  gap: 4px;
  font-size: 14px;
  color: #b8c5dd;
}

.shield-summary strong {
  font-size: 16px;
  color: #e8edf6;
}

.shield-xp {
  background: #111a2b;
  border-radius: 16px;
  padding: 14px;
  display: grid;
  gap: 10px;
}

.shield-xp h2 {
  margin: 0;
  font-size: 17px;
}

.shield-xp h3 {
  margin: 0;
  font-size: 17px;
}

.xp-meta {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  color: #b8c5dd;
}

.xp-bar {
  height: 10px;
  border-radius: 999px;
  background: #0f1627;
  border: 1px solid #24314d;
  overflow: hidden;
}

.xp-bar-fill {
  height: 100%;
  border-radius: 999px;
  background: linear-gradient(90deg, #4f8bff, #7ef7e6);
}

.xp-hints {
  font-size: 14px;
  color: #c6d3ec;
}

.xp-hints ul {
  margin: 6px 0 0;
  padding-left: 18px;
  display: grid;
  gap: 4px;
}

.shield-grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 12px;
}

.shield-tile {
  border-radius: 18px;
  padding: 18px;
  background: #151d2e;
  display: grid;
  gap: 10px;
  text-decoration: none;
  color: inherit;
  min-height: 170px;
  position: relative;
  border: 1px solid transparent;
  transition: transform 0.18s ease, box-shadow 0.18s ease,
    border-color 0.18s ease;
}

.tile-status {
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
}

.tile-status--chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 24px;
  max-width: 100%;
  text-align: center;
}

.status--new {
  background: rgba(255, 211, 106, 0.2);
  color: #ffd36a;
}

.status--fresh {
  background: rgba(126, 247, 230, 0.2);
  color: #7ef7e6;
}

.status--stale {
  background: rgba(255, 107, 107, 0.2);
  color: #ff6b6b;
}

.tile-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
  min-width: 0;
  flex-wrap: wrap;
}

.tile-score {
  font-size: 22px;
  font-weight: 700;
  min-width: 0;
  flex: 1 1 220px;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  line-clamp: 2;
}

.tile-confidence {
  font-size: 15px;
  color: #7ef7e6;
}

.tile-headline {
  font-size: 14px;
  color: #c6d3ec;
}

.tile-progress {
  display: flex;
  flex-wrap: wrap;
  gap: 6px 12px;
  font-size: 13px;
  color: #9bb0d3;
}

.tile-next {
  font-size: 13px;
  color: #e8edf6;
}

.shield-quests {
  display: grid;
  gap: 10px;
}

.shield-quests h2 {
  margin: 0;
  font-size: 18px;
}

.quest-list {
  display: grid;
  gap: 10px;
}

.quest-card {
  background: #111a2b;
  border-radius: 14px;
  padding: 16px;
  display: grid;
  gap: 6px;
  font-size: 14px;
  color: #c6d3ec;
}

.quest-title {
  font-size: 16px;
  font-weight: 700;
  color: #e8edf6;
}

.quest-why {
  color: #ffb347;
}

.quest-action {
  color: #e8edf6;
}

.quest-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: #7ef7e6;
}

.bottom-nav {
  position: relative;
  margin: 0 auto;
  width: min(430px, 100%);
  min-height: var(--bottom-nav-h, 124px);
  background: #111a2b;
  border-radius: 999px;
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 6px;
  border: 1px solid #24314d;
  box-shadow: 0 12px 30px rgba(3, 7, 18, 0.5);
  z-index: 1;
  backdrop-filter: blur(6px);
}

.build-footer {
  width: min(430px, 100%);
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: #8ea0c5;
  opacity: 0.85;
  pointer-events: none;
}

.bottom-nav-link {
  min-height: 48px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  text-decoration: none;
  color: #c6d3ec;
  background: transparent;
  transition: background 0.18s ease, color 0.18s ease, transform 0.18s ease;
}

.bottom-nav-link.active {
  background: #4f8bff;
  color: #fff;
}

.island-form textarea,
.settings-textarea {
  width: 100%;
  border-radius: 12px;
  border: 1px solid #24314d;
  padding: 12px;
  background: #0f1627;
  color: #e8edf6;
  font-size: 15px;
}

.island-form label {
  display: grid;
  gap: 8px;
  font-size: 15px;
}

.optimization-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
  margin-bottom: 16px;
}

.decision-tree-header {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 12px;
}

.decision-tree-header h3 {
  margin: 0;
  font-size: 18px;
}

.decision-tree-actions {
  display: grid;
  gap: 16px;
  margin-bottom: 16px;
}

.decision-tree-action {
  display: grid;
  gap: 12px;
  padding: 12px;
  border-radius: 16px;
  border: 1px solid #24314d;
  background: rgba(15, 22, 39, 0.7);
}

.decision-tree-action-header {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.decision-tree-outcomes {
  display: grid;
  gap: 12px;
}

.decision-tree-outcome {
  display: grid;
  gap: 8px;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid #1d2a44;
  background: #0f1627;
}

.decision-tree-action label {
  display: grid;
  gap: 6px;
  font-size: 14px;
}

.decision-tree-action input[type='text'],
.decision-tree-action input[type='number'] {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #24314d;
  padding: 8px 10px;
  background: #0f1627;
  color: #e8edf6;
  font-size: 14px;
}

.decision-tree-action-footer {
  display: grid;
  gap: 8px;
  font-size: 13px;
  color: #b9c3d9;
}

.decision-tree-hint {
  font-size: 13px;
  color: #9fb1d4;
}

.decision-tree-total strong {
  color: #e8edf6;
}

.decision-tree-controls {
  display: flex;
  justify-content: flex-end;
}

@media (min-width: 720px) {
  .decision-tree-header {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }

  .decision-tree-action-header {
    flex-direction: row;
    align-items: flex-end;
    justify-content: space-between;
  }

  .decision-tree-outcome {
    grid-template-columns: repeat(3, minmax(0, 1fr)) auto;
    align-items: end;
  }

  .decision-tree-action-footer {
    grid-template-columns: 1fr auto auto;
    align-items: center;
  }
}

.optimization-grid input,
.optimization-row input {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #24314d;
  padding: 8px 10px;
  background: #0f1627;
  color: #e8edf6;
  font-size: 14px;
}

.bayes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
}

.bayes-grid input,
.bayes-grid select {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #24314d;
  padding: 8px 10px;
  background: #0f1627;
  color: #e8edf6;
  font-size: 14px;
}

.causal-grid {
  display: grid;
  gap: 12px;
  margin-bottom: 16px;
}

.causal-grid select,
.causal-grid input,
.causal-edge-row input {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #24314d;
  padding: 8px 10px;
  background: #0f1627;
  color: #e8edf6;
  font-size: 14px;
}

.causal-edge-row {
  display: grid;
  grid-template-columns: minmax(120px, 1fr) auto minmax(120px, 1fr) auto;
  gap: 8px;
  align-items: center;
  margin-bottom: 8px;
}

.causal-node-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.causal-controls-row {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
  margin-top: 12px;
}

.causal-control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  padding: 6px 0;
  border-bottom: 1px dashed #1f2a44;
  font-size: 14px;
}

.causal-control-row span {
  display: inline-flex;
  gap: 8px;
  align-items: center;
}

.causal-status {
  font-size: 13px;
  color: #7ef7e6;
}

.tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(79, 139, 255, 0.15);
  color: #d7e2f7;
  font-size: 13px;
}

.muted {
  color: #7f8fb0;
  font-size: 14px;
}

.bayes-controls {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-top: 16px;
  flex-wrap: wrap;
}

.bayes-status {
  font-size: 13px;
  color: #7ef7e6;
}

.result-summary {
  margin: 8px 0 12px;
  display: grid;
  gap: 8px;
  color: #d7e2f7;
  font-size: 15px;
}

.bayes-summary {
  display: grid;
  gap: 8px;
}

.bayes-chart {
  width: 100%;
  max-width: 360px;
  height: auto;
}

.bayes-chart rect:first-of-type {
  fill: #0f1627;
  stroke: #24314d;
  stroke-width: 1;
}

.bayes-chart rect {
  fill: rgba(79, 139, 255, 0.45);
}

.bayes-chart text {
  fill: #a9b6cf;
  font-size: 12px;
}

.optimization-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  color: #a9b6cf;
  margin-bottom: 8px;
}

.optimization-columns {
  font-size: 13px;
  color: #7f8fb0;
}

.optimization-actions {
  display: grid;
  gap: 10px;
}

.optimization-row {
  display: grid;
  grid-template-columns: minmax(140px, 1.4fr) repeat(3, minmax(90px, 1fr)) auto auto;
  gap: 8px;
  align-items: center;
}

.optimization-mandatory {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #cbd6ea;
}

.optimization-controls {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
  flex-wrap: wrap;
}

.optimization-status {
  font-size: 13px;
  color: #7ef7e6;
}

.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  min-height: 44px;
  padding: 10px 18px;
  border: none;
  background: #4f8bff;
  color: white;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  transition: transform 0.18s ease, box-shadow 0.18s ease,
    background 0.18s ease, color 0.18s ease;
}

.button.ghost {
  background: transparent;
  border: 1px solid #36507a;
  color: #d0dcf2;
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.screen-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.island-result {
  background: #111a2b;
  border-radius: 16px;
  padding: 16px;
  display: grid;
  gap: 10px;
}

.result-metrics {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.result-metrics div {
  background: #0f1627;
  border-radius: 12px;
  padding: 10px;
  display: grid;
  gap: 4px;
  font-size: 14px;
  color: #b8c5dd;
}

.result-metrics strong {
  font-size: 18px;
  color: #e8edf6;
}

.settings-block {
  background: #111a2b;
  border-radius: 16px;
  padding: 16px;
  display: grid;
  gap: 12px;
}

.settings-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.settings-hint {
  margin: 0;
  font-size: 14px;
  color: #b8c5dd;
}

.settings-warning {
  margin: 0;
  font-size: 14px;
  color: #f2b36b;
}

.shield-tile:active,
.bottom-nav-link:active,
.button:active {
  transform: scale(0.98);
}

.shield-tile:hover,
.shield-tile:focus-visible {
  border: 1px solid rgba(79, 139, 255, 0.5);
  box-shadow: 0 12px 24px rgba(5, 10, 26, 0.4);
}

.button:hover,
.button:focus-visible {
  box-shadow: 0 8px 20px rgba(79, 139, 255, 0.3);
}

.bottom-nav-link:hover,
.bottom-nav-link:focus-visible {
  background: rgba(79, 139, 255, 0.2);
  color: #e8edf6;
}

@media (prefers-reduced-motion: reduce) {
  .shield-tile,
  .bottom-nav-link,
  .button {
    transition: none;
  }
}

@media (min-width: 431px) {
  #app {
    padding: 24px;
  }

  .bottom-nav {
    bottom: 20px;
    width: min(430px, calc(100% - 48px));
  }
}

@media (min-width: 520px) {
  .shield-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.onboarding-overlay {
  position: fixed;
  inset: 0;
  z-index: 990;
  background: rgba(6, 10, 20, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
  pointer-events: none;
}

.onboarding-overlay[data-active='true'] {
  pointer-events: auto;
}

.onboarding-card {
  width: min(560px, 100%);
  background: #111a2b;
  border: 1px solid #24314d;
  border-radius: 16px;
  padding: 18px;
  display: grid;
  gap: 12px;
  pointer-events: auto;
}

.onboarding-card h2 {
  margin: 0;
}

.onboarding-card ol {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 8px;
  color: #c6d3ec;
}

.onboarding-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.next-step {
  background: #111a2b;
  border-radius: 14px;
  padding: 14px;
  display: grid;
  gap: 8px;
}

.next-step h2,
.next-step p {
  margin: 0;
}

.next-step p {
  color: #b8c5dd;
}

.next-step-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.button-primary-large {
  min-height: 52px;
  width: 100%;
  font-size: 17px;
}

.island-intro {
  margin-bottom: 10px;
  color: #b8c5dd;
  font-size: 14px;
}

.island-advanced {
  margin-top: 12px;
  padding: 12px;
  border: 1px solid #24314d;
  border-radius: 12px;
  background: rgba(15, 22, 39, 0.6);
}

.island-advanced summary {
  cursor: pointer;
  margin-bottom: 12px;
}

.islands-hub-card .tile-score {
  font-size: 18px;
}

.islands-hub-card-header {
  gap: 10px;
}

.tile-meta-badges {
  display: flex;
  flex: 0 1 160px;
  min-width: 0;
  max-width: 100%;
  gap: 6px;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.islands-hub-badge {
  flex: 0 1 auto;
  max-width: 100%;
  white-space: normal;
  word-break: break-word;
  padding: 4px 10px;
  min-height: 24px;
  display: inline-flex;
  align-items: center;
  text-align: center;
  border-radius: 999px;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
}

@media (max-width: 420px) {
  .tile-header {
    align-items: stretch;
  }

  .tile-meta-badges {
    justify-content: flex-start;
    flex-basis: 100%;
  }
}


.hub-meta {
  margin-top: 8px;
  font-size: 13px;
  color: #9bb0d3;
}

.tile-sparkline {
  min-height: 28px;
}

.sparkline {
  width: 110px;
  height: 28px;
}

.sparkline polyline {
  fill: none;
  stroke: #7ef7e6;
  stroke-width: 2;
}

.sparkline-single {
  font-size: 12px;
  color: #9bb0d3;
}

.report-status {
  font-size: 13px;
  color: #9bb0d3;
  display: inline-flex;
  align-items: center;
}

.report-metrics {
  margin: 0;
  padding-left: 18px;
  color: #c6d3ec;
  font-size: 14px;
  display: grid;
  gap: 4px;
}

.settings-home-switch {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.settings-home-switch label {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border: 1px solid #24314d;
  border-radius: 12px;
  padding: 10px 12px;
  background: #0f1627;
  cursor: pointer;
}

.settings-home-switch input {
  accent-color: #4f8bff;
}

.cosmos-screen {
  position: relative;
}

.cosmos-view-toggle {
  margin-bottom: 10px;
}

.cosmos-view-panel {
  margin-bottom: 10px;
  border: 1px solid #24314d;
  border-radius: 12px;
  background: rgba(14, 22, 40, 0.72);
  padding: 10px 12px;
}

.cosmos-controls {
  display: grid;
  gap: 10px;
  margin-bottom: 8px;
  color: #c6d3ec;
  font-size: 14px;
}

.cosmos-controls-group {
  display: grid;
  gap: 6px;
}

.cosmos-controls-group h3 {
  margin: 0;
  font-size: 13px;
  color: #9fb2d7;
}

.cosmos-controls label {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.cosmos-map-wrap {
  position: relative;
  border-radius: 16px;
  border: 1px solid #24314d;
  background: radial-gradient(circle at 40% 30%, #182849, #0e1628 60%);
  padding: 10px;
  overflow: hidden;
}

.cosmos-map {
  width: 100%;
  height: auto;
  display: block;
}

.cosmos-reset {
  position: absolute;
  top: 18px;
  right: 18px;
  z-index: 5;
}

.cosmos-viewport {
  transform-origin: center;
}

.cosmos-core {
  fill: #ffd36a;
  opacity: 0.9;
}

.cosmos-orbit {
  fill: none;
  stroke: rgba(139, 168, 220, 0.35);
  stroke-width: 1;
}

.cosmos-orbit-label {
  fill: #9fb2d7;
  font-size: 12px;
}

.cosmos-planet {
  cursor: pointer;
}

.cosmos-planet.is-hidden {
  display: none;
}

.cosmos-planet-halo {
  fill: none;
  stroke: rgba(126, 247, 230, 0.75);
  stroke-width: 2;
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.cosmos-planet-hit {
  fill: transparent;
  pointer-events: all;
}

.cosmos-planet.is-selected .cosmos-planet-halo {
  opacity: 1;
  stroke: #fff2a0;
  stroke-width: 2.8;
}

.cosmos-planet-label {
  fill: #e8edf6;
  font-size: 12px;
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.cosmos-planet.show-label .cosmos-planet-label {
  opacity: 1;
}

.cosmos-badge--ok {
  fill: #7ef7e6;
}

.cosmos-badge--risk {
  fill: #ff6b6b;
}

.cosmos-badge--none {
  fill: #ffd36a;
}


.cosmos-spark-layer {
  pointer-events: none;
}


.cosmos-history-dot {
  fill: #9ec5ff;
  pointer-events: none;
}

.cosmos-history-dot--pulse {
  animation: cosmosTrailPulse 2.8s ease-in-out infinite;
}

.cosmos-comet-layer {
  pointer-events: none;
}

.cosmos-comet {
  fill: #f8fdff;
  filter: drop-shadow(0 0 4px rgba(198, 231, 255, 0.85));
  animation: cosmosCometFly 820ms ease-out forwards;
}


.cosmos-legend {
  margin-bottom: 8px;
  color: #9fb2d7;
  font-size: 13px;
}

.cosmos-legend p {
  margin: 0;
}

.cosmos-forecast-block {
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid #24314d;
  display: grid;
  gap: 6px;
  color: #d9e2f4;
  font-size: 13px;
}

.cosmos-forecast-block h4 {
  margin: 0;
  font-size: 13px;
  color: #c6d3ec;
}

.cosmos-forecast-block p {
  margin: 0;
}

.cosmos-drift-alert {
  color: #ffd17d;
}

.cosmos-interval {
  position: relative;
  height: 12px;
  border-radius: 999px;
  background: rgba(64, 91, 139, 0.45);
  overflow: hidden;
}

.cosmos-interval-range {
  position: absolute;
  top: 3px;
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, #65a2ff, #7ef7e6);
}

.cosmos-interval-median {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  border-radius: 2px;
  background: #fff2a0;
}
.cosmos-activity-panel {
  margin-top: 12px;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid #24314d;
  background: rgba(12, 20, 35, 0.85);
}

.cosmos-activity-panel h3 {
  margin: 0 0 8px;
  font-size: 14px;
}

.cosmos-activity-panel ul {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 6px;
  color: #d9e2f4;
  font-size: 13px;
}

.cosmos-planet--twinkle {
  transform-box: fill-box;
  transform-origin: center;
  animation: cosmosTwinkle 3.2s ease-in-out infinite;
  animation-delay: var(--twinkle-phase, 0s);
}

.cosmos-planet-halo--pulse {
  animation: cosmosHaloPulse 2.4s ease-in-out infinite;
}

.cosmos-spark {
  fill: #c5ffec;
  opacity: 0.95;
  animation: cosmosSparkBurst 430ms ease-out forwards;
}

.cosmos-planet:focus-visible .cosmos-planet-hit {
  stroke: #ffffff;
  stroke-width: 2;
}

.cosmos-menu {
  position: absolute;
  transform: translate(-50%, -50%);
  min-width: 170px;
  max-width: min(260px, 80vw);
  background: #101a2e;
  border: 1px solid #24314d;
  border-radius: 12px;
  padding: 10px;
  display: grid;
  gap: 8px;
  z-index: 4;
}

.cosmos-menu-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.cosmos-radial-menu {
  position: absolute;
  transform: translate(-50%, -50%);
  width: 148px;
  height: 148px;
  border-radius: 50%;
  border: 1px solid rgba(159, 178, 215, 0.4);
  background: radial-gradient(circle, rgba(16, 26, 46, 0.86) 35%, rgba(7, 11, 22, 0.96) 100%);
  z-index: 6;
  pointer-events: none;
}

.cosmos-radial-menu.is-active {
  animation: cosmosRadialFade 120ms ease-out;
}

.cosmos-radial-center {
  position: absolute;
  inset: 50%;
  width: 18px;
  height: 18px;
  margin-left: -9px;
  margin-top: -9px;
  border-radius: 50%;
  border: 1px solid rgba(126, 247, 230, 0.75);
  background: rgba(126, 247, 230, 0.25);
  transition: opacity 0.16s ease;
}

.cosmos-radial-center.is-idle {
  opacity: 0.5;
}

.cosmos-radial-item {
  position: absolute;
  left: 50%;
  top: 50%;
  margin-left: -38px;
  margin-top: -14px;
  width: 76px;
  text-align: center;
  font-size: 12px;
  line-height: 1.2;
  padding: 5px 6px;
  border-radius: 8px;
  color: #e8edf6;
  background: rgba(25, 39, 67, 0.78);
  border: 1px solid transparent;
  transition: background-color 0.14s ease, border-color 0.14s ease;
}

.cosmos-radial-item.is-active {
  background: rgba(79, 139, 255, 0.35);
  border-color: rgba(126, 247, 230, 0.9);
}

@keyframes cosmosRadialFade {
  from {
    opacity: 0.2;
    transform: translate(-50%, -50%) scale(0.92);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}


@keyframes cosmosTwinkle {
  0%, 100% { opacity: 0.84; transform: scale(0.97); }
  45% { opacity: 1; transform: scale(1.04); }
}

@keyframes cosmosHaloPulse {
  0%, 100% { opacity: calc(var(--halo-base-opacity, 0.25) * 0.9); }
  50% { opacity: calc(var(--halo-base-opacity, 0.25) * 1.15); }
}

@keyframes cosmosSparkBurst {
  from { opacity: 0.95; transform: translate(0, 0) scale(1); }
  to { opacity: 0; transform: translate(var(--spark-dx, 0px), var(--spark-dy, 0px)) scale(0.35); }
}

@keyframes cosmosTrailPulse {
  0%, 100% { opacity: 0.35; }
  50% { opacity: 0.95; }
}

@keyframes cosmosCometFly {
  from { opacity: 0; transform: translate(0, 0); }
  10% { opacity: 1; }
  to { opacity: 0; transform: translate(var(--comet-dx, 36px), var(--comet-dy, 18px)); }
}

@media (prefers-reduced-motion: reduce) {
  .cosmos-planet--twinkle,
  .cosmos-planet-halo--pulse,
  .cosmos-spark,
  .cosmos-radial-menu.is-active,
  .cosmos-history-dot--pulse,
  .cosmos-comet {
    animation: none !important;
  }
}

.stress-mode-toggle {
  border: 1px solid #24314d;
  border-radius: 12px;
  padding: 10px 12px;
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.stress-mc-fields {
  display: grid;
  gap: 12px;
  margin-bottom: 12px;
}

.stress-shock-toggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.stress-mc-result {
  margin-top: 12px;
  border-top: 1px solid #24314d;
  padding-top: 12px;
}

.stress-histogram {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(16, minmax(0, 1fr));
  align-items: end;
  gap: 4px;
  min-height: 88px;
}

.stress-bin {
  display: flex;
  align-items: end;
  justify-content: center;
}

.stress-bin span {
  display: block;
  width: 100%;
  background: linear-gradient(180deg, #7ef7e6, #4f8bff);
  border-radius: 4px 4px 0 0;
}

.stress-mc-history {
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px dashed #24314d;
}

.stress-mc-sparkline {
  width: 100%;
  height: 48px;
  margin: 6px 0 8px;
}

.stress-mc-sparkline polyline {
  fill: none;
  stroke: #7ef7e6;
  stroke-width: 2;
}

.stress-mc-history ul {
  margin: 0;
  padding: 0;
  list-style: none;
  display: grid;
  gap: 6px;
}

.stress-mc-history li {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 10px;
  font-size: 0.9rem;
}

.stress-mc-history em {
  font-style: normal;
  color: #98a7c2;
}

.history-quick-form .screen-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.history-table-wrap {
  overflow-x: auto;
}

.history-table {
  width: 100%;
  border-collapse: collapse;
}

.history-table th,
.history-table td {
  padding: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.12);
  text-align: left;
}

.history-sparkline {
  width: 100%;
  max-width: 320px;
  height: 72px;
}

.history-sparkline polyline {
  fill: none;
  stroke: #7ef7e6;
  stroke-width: 2.2;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.history-sparkline-marker {
  stroke: #ff9f6e;
  stroke-width: 1.5;
  stroke-dasharray: 2 2;
}

.history-drift-alert {
  margin-top: 8px;
  padding: 10px 12px;
  border: 1px solid rgba(255, 159, 110, 0.45);
  border-radius: 10px;
  background: rgba(255, 159, 110, 0.08);
}

.history-drift-alert p {
  margin: 6px 0 0;
}

.history-forecast-card {
  display: grid;
  gap: 8px;
}

.history-forecast-actions {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  align-items: center;
}

.history-horizon-switch {
  display: inline-flex;
  gap: 6px;
}

.history-horizon-switch .is-selected {
  border-color: #7ef7e6;
  color: #7ef7e6;
}

.history-interval {
  max-width: 340px;
}

.history-sparkline--forecast polyline {
  stroke: #9fbcff;
}

.islands-hub-screen-title,
.islands-hub-title-wrap,
.help-topic-header {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.help-icon-button {
  min-width: 24px;
  min-height: 24px;
  width: 24px;
  height: 24px;
  border-radius: 999px;
  border: 1px solid #36507a;
  background: #0f1627;
  color: #d9e3f6;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  line-height: 1;
  cursor: pointer;
}

.help-icon-button:hover,
.help-icon-button:focus-visible {
  border-color: #4f8bff;
  box-shadow: 0 0 0 2px rgba(79, 139, 255, 0.35);
  outline: none;
}

.help-modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 1000;
  background: rgba(8, 12, 22, 0.75);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: 12px;
}

.help-modal {
  width: min(560px, 100%);
  max-height: 80dvh;
  overflow: auto;
  background: #111a2b;
  border: 1px solid #24314d;
  border-radius: 16px;
  padding: 16px;
  display: grid;
  gap: 12px;
}

.help-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.help-modal-header h2,
.help-sections h3,
.help-sections p {
  margin: 0;
}

.help-close {
  min-width: 32px;
  min-height: 32px;
  border-radius: 10px;
  border: 1px solid #36507a;
  background: #0f1627;
  color: #d9e3f6;
  cursor: pointer;
}

.help-close:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(79, 139, 255, 0.35);
}

.help-one-liner {
  margin: 0;
  color: #d3def3;
}

.help-sections {
  display: grid;
  gap: 10px;
}

.help-sections section {
  display: grid;
  gap: 6px;
}

.help-sections p,
.help-sections li {
  color: #b8c5dd;
}

.help-topic-card h2 {
  margin: 0;
  font-size: 18px;
}

.help-topic-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}
