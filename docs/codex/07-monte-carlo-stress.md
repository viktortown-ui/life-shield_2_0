# Monte Carlo в модуле «Стресс-тест»

## Входы
Вероятностный режим использует те же базовые финансовые входы, что и детерминированный стресс-тест:
- `monthlyIncome`
- `monthlyExpenses`
- `reserveCash`

Параметры Monte Carlo:
- горизонт: 3 / 6 / 12 месяцев;
- число итераций (по умолчанию 2000, максимум 20000);
- волатильность дохода (%);
- волатильность расходов (%);
- seed (для воспроизводимости);
- опциональный разовый шок дохода: вероятность + величина падения (%).

## Модель
Для каждой траектории и каждого месяца на горизонте:
- `income_t = income_mean * (1 + N(0, sigma_income))`
- `expense_t = expense_mean * (1 + N(0, sigma_expense))`
- обе величины ограничиваются снизу нулём;
- резерв обновляется как `reserve += income_t - expense_t`;
- если `reserve < 0`, фиксируется месяц руины (runway).

Разовый шок (если включён):
- с заданной вероятностью один раз за траекторию применяется падение дохода на `X%`.

## Что означает `ruinProb`
`ruinProb` — это доля траекторий, где резерв становится отрицательным до конца выбранного горизонта.

Пример: `ruinProb = 27.4%` при горизонте 6 месяцев означает, что в ~27 из 100 симулированных траекторий резерв ушёл ниже нуля до конца 6-го месяца.

## Важное предупреждение
Monte Carlo чувствителен к допущениям (волатильности, горизонту, шоку и качеству входных данных). Результат — это **оценка риска при заданной модели**, а не «истина» или гарантированный прогноз.
