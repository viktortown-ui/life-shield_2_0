# Prompt 12 — Cashflow Forecast (observations)

## Модель (MVP)
- Источник: последние `N=min(24, available)` месяцев из `observations.cashflowMonthly`.
- Ряд: `net = income - expense`.
- Если данных `< 6` месяцев, прогноз не запускается (UI-подсказка: нужно >=6 месяцев).
- Генерация траекторий: bootstrap sampling.
  - Каждый будущий месяц берётся случайно из исторического `net` ряда.
  - По умолчанию `M=2000` итераций (лимит в worker до `20000`).
  - Поддержан `seed` для воспроизводимости.

## Метрики прогноза
- `p10/p50/p90` — квантили суммарного `net` на выбранном горизонте (`3/6/12` мес).
- `uncertainty = p90 - p10`.
- `probNetNegative` — доля траекторий, где итоговый суммарный `net` на горизонте отрицательный.
- Дополнительно хранится помесячный профиль квантилей (`monthly[]`) для мини-спарклайна.

## Как интерпретировать
- `p50` — медианный сценарий (база).
- `p10` — стрессовая нижняя граница (примерно 1 из 10 сценариев хуже).
- `p90` — верхняя граница благоприятного сценария.
- `probNetNegative >= 0.5` — в Cosmos для planet `history` показывается badge `RISK`.

## Ограничения
- Модель не учитывает тренды/сезонность как ARIMA, это честный bootstrap-MVP.
- Качество сильно зависит от полноты и репрезентативности наблюдений.
- При изменении истории (добавление/удаление/очистка месяцев) сохранённый прогноз сбрасывается.
